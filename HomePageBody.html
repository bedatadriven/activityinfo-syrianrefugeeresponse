
<div class="jumbotron" style="position: relative; top: -60px">
    <div class="container">
        <div id="content" class="clearfix row">
            <div id="main" class="col-md-12 clearfix" role="main">
                <br>
                <div class="row">
                    <div class="col-md-8">
                        <h1>WASH Info</h1>
                        <p class="lead">Real-time monitoring with<br> integrated statistical analysis</p>
                    </div>
                    <div class="col-md-4">
                        <form class="form-signin" id="loginForm" action="/login" method="POST">
                            <h3 class="form-signin-heading">Login</h3>
                            <input type="text" name="email" id="emailInput" class="form-control" placeholder="E-mail">
                            <input type="password" name="password" id="passwordInput" class="form-control" placeholder="Password">
                            <div class="alert alert-danger help-block hide" id="loginAlert" role="alert">
                                Your details are not correct. Thanks to check your email and password
                            </div>
                            <button class="btn btn-info btn-primary" type="submit" id="loginButton">Login</button>
                            <img src="//commondatastorage.googleapis.com/ai-custom-domains/washinfo/img/ajax-loader-spinner.gif" width="16" height="16" class="hide" id="loginSpinner">
                            <div class="login-problem"><a href="loginProblem">Forgot your password?</a></div>
                        </form>
                    </div>
                </div>
            </div>

        </div> <!-- end #content -->
    </div>
</div>
<div style="height:350px"> </div>


<script type="text/javascript">
    var enableForm = function(enabled) {
        $('#loginButton').prop('disabled', !enabled);
        $('#loginSpinner').toggleClass('hide', enabled);
    }

    $('#loginForm').submit(function() {

        $('#loginAlert').addClass('hide');

        enableForm(false);
        $.ajax({
            url: '/login/ajax',
            type: 'POST',
            data: {
                email: $('#emailInput').val(),
                password: $('#passwordInput').val(),
                ajax: 'true'
            },
            success: function() {
                if(window.location.pathname != '/') {
                    window.location = '/' + window.location.search + window.location.hash;
                } else {
                    window.location.reload(true);
                }
            },
            error: function(xhr) {
                $('#loginAlert').toggleClass('hide', false);
            },
            complete: function() {
                enableForm(true);
            }
        });
        return false;
    });

    $('#emailInput').focus();
</script>